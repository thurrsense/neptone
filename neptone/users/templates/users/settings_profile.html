{% extends "base.html" %}
{% block title %}Settings ¬∑ NEPTONE{% endblock %}
{% block content %}

<div class="row g-4">
    <div class="col-12 col-lg-8">

        <div class="card border-0 shadow-sm rounded-4 mb-4">
            <div class="card-body">
                <h2 class="h5 mb-3">–ü—Ä–æ—Ñ–∏–ª—å</h2>
                <form method="post" enctype="multipart/form-data">
                    {% csrf_token %}
                    <input type="hidden" name="action" value="save_profile">
                    {{ form.non_field_errors }}

                    <div class="mb-2">
                        <label class="form-label">Email</label>
                        {{ form.email }} <div class="text-danger small">{{ form.email.errors }}</div>
                    </div>

                    <div class="mb-2">
                        <label class="form-label">–ò–º—è / –§–∞–º–∏–ª–∏—è</label>
                        <div class="d-flex gap-2">
                            {{ form.first_name }} {{ form.last_name }}
                        </div>
                        <div class="text-danger small">{{ form.first_name.errors }} {{ form.last_name.errors }}</div>
                    </div>

                    <div class="mb-2">
                        <label class="form-label">–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è</label>
                        {{ form.birth_date }} <div class="text-danger small">{{ form.birth_date.errors }}</div>
                    </div>

                    <div class="mb-2">
                        <label class="form-label">–ë–∏–æ</label>
                        {{ form.bio }} <div class="text-danger small">{{ form.bio.errors }}</div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">–ê–≤–∞—Ç–∞—Ä</label>
                        {{ form.avatar }} <div class="text-danger small">{{ form.avatar.errors }}</div>
                    </div>

                    <button class="btn btn-dark" type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </form>
            </div>
        </div>

        <div class="card border-0 shadow-sm rounded-4 mb-4" id="upload">
            <div class="card-body">
                <h2 class="h5 mb-3">Upload —Ç—Ä–µ–∫–∞</h2>
                <form method="post" enctype="multipart/form-data">
                    {% csrf_token %}
                    <input type="hidden" name="action" value="upload_track">
                    {{ upload_form.non_field_errors }}

                    <div class="mb-2">
                        <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                        {{ upload_form.title }} <div class="text-danger small">{{ upload_form.title.errors }}</div>
                    </div>
                    <div class="mb-2">
                        <label class="form-label">–ê—É–¥–∏–æ</label>
                        {{ upload_form.audio }} <div class="text-danger small">{{ upload_form.audio.errors }}</div>
                    </div>
                    <div class="mb-2">
                        <label class="form-label">–û–±–ª–æ–∂–∫–∞ (–æ–ø—Ü.)</label>
                        {{ upload_form.cover }} <div class="text-danger small">{{ upload_form.cover.errors }}</div>
                    </div>
                    <div class="form-check mb-3">
                        {{ upload_form.is_public }}
                        <label class="form-check-label">–ü—É–±–ª–∏—á–Ω—ã–π</label>
                    </div>

                    <button class="btn btn-dark" type="submit">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
                </form>
                <div class="form-text mt-2">–î–æ 50 –ú–ë. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É–≤–µ–ª–∏—á—å `client_max_body_size` –≤ nginx.</div>
            </div>
        </div>

        <div class="card border-0 shadow-sm rounded-4">
            <div class="list-group list-group-flush">
                <a class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
                    href="{% url 'password_reset' %}">
                    <span>–°–±—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å</span> <span>üîê</span>
                </a>

                <form class="list-group-item d-flex justify-content-between align-items-center m-0" method="post"
                    action="{% url 'deactivate_sessions' %}">
                    {% csrf_token %}
                    <span>–†–∞–∑–ª–æ–≥–∏–Ω–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏</span>
                    <button class="btn btn-sm btn-outline-secondary" type="submit">Run</button>
                </form>

                <form class="list-group-item d-flex justify-content-between align-items-center m-0" method="post"
                    action="{% url 'delete_account' %}">
                    {% csrf_token %}
                    <span class="text-danger">–£–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç</span>
                    <button class="btn btn-sm btn-outline-danger" type="submit">Delete</button>
                </form>
            </div>
        </div>

    </div>
</div>

{% endblock %}