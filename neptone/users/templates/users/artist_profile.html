{% extends "base.html" %}
{% load static %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/artist.css' %}">
{% endblock %}

{% block content %}

<!-- Hero-–≥—Ä–∞–¥–∏–µ–Ω—Ç –ø–æ–¥ —à–∞–ø–∫–æ–π -->
<div class="hero-bg"></div>

<div class="page-wrap container-xxl">

    <!-- ======= –ö–∞—Ä—Ç–æ—á–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è ======= -->
    <section class="profile-card shadow-lg">
        <div class="profile-cover">
            {% if profile.header_image %}
            <img src="{{ profile.header_image.url }}" alt="" class="cover-img">
            {% endif %}
            <button class="btn btn-sm btn-light change-cover">
                <span class="me-1">üñºÔ∏è</span> Change header image
            </button>
        </div>

        <div class="profile-body d-flex align-items-center">
            <div class="avatar-wrap">
                <img src="{{ profile.avatar.url }}" class="avatar" alt="{{ profile.display_name }}">
            </div>

            <div class="flex-grow-1 ms-4">
                <h2 class="artist-name mb-1">{{ profile.display_name }}</h2>
                <div class="artist-meta text-muted">
                    {{ profile.followers_count }} followers
                    <span class="dot">‚Ä¢</span>
                    {{ profile.following_count }} following
                </div>
            </div>

            <div class="profile-actions d-none d-md-flex align-items-center gap-3">
                <a class="link-light icon-link" href="#"><span>üîó</span> Share</a>
                <a class="link-light icon-link" href="{% url 'settings_profile' %}"><span>‚úèÔ∏è</span> Edit</a>
            </div>
        </div>

        <!-- ======= –í–∫–ª–∞–¥–∫–∏ ======= -->
        <div class="profile-tabs">
            {% with tab=request.GET.tab|default:"all" %}
            <a class="tab {% if tab == 'all' %}active{% endif %}" href="?tab=all">All</a>
            <a class="tab {% if tab == 'tracks' %}active{% endif %}" href="?tab=tracks">Tracks</a>
            <a class="tab {% if tab == 'playlists' %}active{% endif %}" href="?tab=playlists">Playlists</a>
            <span class="tab-underline"></span>
            {% endwith %}
        </div>
    </section>

    <!-- ======= –†–∞–∑–¥–µ–ª / –ª–µ–Ω—Ç–∞ ======= -->
    <section class="feed">
        <h5 class="section-title">New realises</h5>

        {% if tracks %}
        {% for t in tracks %}
        <article class="track-row">
            <div class="row g-0 align-items-center">
                <div class="col-auto">
                    <img src="{{ t.cover.url }}" alt="" class="track-cover">
                </div>

                <div class="col">
                    <div class="track-main">
                        <a href="{{ t.get_absolute_url }}" class="track-title">{{ t.title }}</a>
                        <div class="track-sub">
                            <a href="{% url 'artist_profile' profile.user.username %}" class="artist-link">{{
                                profile.display_name }}</a>
                        </div>
                        <div class="track-stats">
                            <span class="stat">‚ñ∂ {{ t.play_count|default:0 }}</span>
                            <span class="dot">‚Ä¢</span>
                            <span class="stat">{{ t.duration_display }}</span>
                            <span class="dot">‚Ä¢</span>
                            <span class="stat">{{ t.created_at|timesince }} ago</span>
                        </div>
                    </div>
                </div>

                <div class="col-auto">
                    <a class="btn play-btn" href="{{ t.get_absolute_url }}#play" aria-label="Play">
                        <!-- –º–∞–ª–µ–Ω—å–∫–∏–π SVG, —á—Ç–æ–±—ã –Ω–µ –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç –∏–∫–æ–Ω–ø–∞–∫–æ–≤ -->
                        <svg width="18" height="18" viewBox="0 0 18 18" fill="currentColor" aria-hidden="true">
                            <path d="M6 4.5v9l8-4.5-8-4.5z" />
                        </svg>
                    </a>
                </div>
            </div>
        </article>
        {% endfor %}
        {% else %}
        <div class="empty">–ü–æ–∫–∞ –Ω–µ—Ç –ø—É–±–ª–∏—á–Ω—ã—Ö —Ç—Ä–µ–∫–æ–≤. –ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º, –∑–∞–≥—Ä—É–∑–∏—Ç–µ —á—Ç–æ-–Ω–∏–±—É–¥—å!</div>
        {% endif %}
    </section>
</div>

{% endblock %}